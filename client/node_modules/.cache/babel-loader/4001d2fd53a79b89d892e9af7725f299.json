{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Harrison\\\\Documents\\\\JavaScript Projects\\\\Gig Tracker\\\\src\\\\components\\\\edit-gig.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { formatGigDate } from \"../Utils.js\";\nexport default class EditGig extends Component {\n  constructor(props) {\n    // Super refers to the parent class' (Component) constructor.\n    // The \"this\" keyword cannot be used until after you have called the parent constructor.\n    super(props);\n\n    this.onSubmit = async event => {\n      event.preventDefault(); // Change any line breaks into a singular string of comma-separated band/artist names.\n\n      this.state.gig_bands = this.state.gig_bands.replace(/[\\n\\r]/g, ', '); // Create a new object containing our updated gig.\n\n      const updatedGig = {\n        gig_date: this.formatFinalDate(),\n        gig_or_fest: this.state.gig_or_fest,\n        gig_tourFestName: this.state.gig_tourFestName,\n        gig_bands: this.state.gig_bands,\n        gig_venue: this.state.gig_venue,\n        gig_cancelled: this.state.gig_cancelled\n      };\n      console.log(updatedGig); // Overwrite the existing data using the given ID.\n      // We await here because we want the changes to complete before the user sees the main page again.\n\n      await axios.post('http://localhost:4000/gigs/update/' + this.props.match.params.id, updatedGig).then(res => console.log(res.data)); // Change the display back to the main page (Gig List).\n\n      this.props.history.push('/gig-tracker/');\n    };\n\n    this.onChangeGigDate = this.onChangeGigDate.bind(this);\n    this.onChangeFestivalEndDate = this.onChangeFestivalEndDate.bind(this);\n    this.onChangeGigBands = this.onChangeGigBands.bind(this);\n    this.onChangeGigOrFest = this.onChangeGigOrFest.bind(this);\n    this.onChangeGigTourFestName = this.onChangeGigTourFestName.bind(this);\n    this.onChangeGigVenue = this.onChangeGigVenue.bind(this);\n    this.onChangeGigCancelled = this.onChangeGigCancelled.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      gig_date: new Date(),\n      festival_end_date: '',\n      gig_or_fest: '',\n      gig_tourFestName: '',\n      gig_bands: '',\n      gig_venue: '',\n      gig_cancelled: false\n    };\n  }\n\n  onChangeGigDate(event) {\n    this.setState({\n      gig_date: event\n    }, () => {\n      if (this.state.festival_end_date < this.state.gig_date) {\n        this.setState({\n          festival_end_date: this.state.gig_date\n        });\n      }\n    });\n  }\n\n  onChangeFestivalEndDate(event) {\n    if (event < this.state.gig_date) {\n      // TODO: Show some sort of error UI.\n      console.log('onChangeFestivalEndDate: End Date cannot be earlier than initial Date.');\n      return;\n    }\n\n    this.setState({\n      festival_end_date: event\n    });\n  }\n\n  onChangeGigOrFest(event) {\n    this.setState({\n      gig_or_fest: event.target.value\n    });\n  }\n\n  onChangeGigTourFestName(event) {\n    this.setState({\n      gig_tourFestName: event.target.value\n    });\n  }\n\n  onChangeGigBands(event) {\n    this.setState({\n      gig_bands: event.target.value\n    });\n  }\n\n  onChangeGigVenue(event) {\n    this.setState({\n      gig_venue: event.target.value\n    });\n  }\n\n  onChangeGigCancelled(event) {\n    this.setState({\n      gig_cancelled: !this.state.gig_cancelled\n    });\n  }\n\n  formatFinalDate() {\n    let date = formatGigDate(this.state.gig_date);\n    console.log(this.state.gig_date + ' ' + this.state.festival_end_date);\n    console.log(this.state.gig_date === this.state.festival_end_date);\n\n    if (this.state.festival_end_date && this.state.gig_date != this.state.festival_end_date) {\n      let end_date = formatGigDate(this.state.festival_end_date);\n      date += ' - ' + end_date;\n    }\n\n    return date;\n  }\n\n  processReturnedDate(date) {\n    if (date === undefined) {\n      return new Date();\n    }\n\n    if (date.includes(\" - \")) {\n      var splitDate = date.split(\" - \");\n      return [new Date(splitDate[0]), new Date(splitDate[1])];\n    } else {\n      return new Date(date);\n    }\n  }\n\n  componentDidMount() {\n    // Get the gig from the DB based on the given ID and set it to the current state of the page.\n    axios.get('http://localhost:4000/gigs/' + this.props.match.params.id).then(response => {\n      var dates = this.processReturnedDate(response.data.gig_date);\n      this.setState({\n        gig_date: dates.length === undefined ? dates : dates[0],\n        festival_end_date: dates.length === undefined ? '' : dates[1],\n        gig_or_fest: response.data.gig_or_fest,\n        gig_tourFestName: response.data.gig_tourFestName,\n        // Put bands back on separate lines.\n        gig_bands: response.data.gig_bands.replace(/, /g, '\\n'),\n        gig_venue: response.data.gig_venue,\n        gig_cancelled: response.data.gig_cancelled === undefined ? false : response.data.gig_cancelled\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form\",\n      id: \"gigFormDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, \"Edit Gig\"), /*#__PURE__*/React.createElement(\"h3\", {\n      id: \"dateHeader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(DatePicker, {\n      selected: this.state.gig_date,\n      dateFormat: \"d MMMM yyyy\",\n      onChange: this.onChangeGigDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }), this.state.gig_or_fest === 'Festival' ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      id: \"endDateHeader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }, \"End Date\"), /*#__PURE__*/React.createElement(DatePicker, {\n      selected: this.state.festival_end_date,\n      dateFormat: \"d MMMM yyyy\",\n      onChange: this.onChangeFestivalEndDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    })) : null, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-check form-check-inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"radio\",\n      name: \"gigOrFestivalRadios\",\n      id: \"gigRadio\",\n      value: \"Gig\",\n      checked: this.state.gig_or_fest === 'Gig',\n      onChange: this.onChangeGigOrFest,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-check-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 29\n      }\n    }, \"Gig\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-check form-check-inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"radio\",\n      name: \"gigOrFestivalRadios\",\n      id: \"festivalRadio\",\n      value: \"Festival\",\n      checked: this.state.gig_or_fest === 'Festival',\n      onChange: this.onChangeGigOrFest,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-check-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 29\n      }\n    }, \"Festival\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 25\n      }\n    }, \"Tour Name: \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.gig_tourFestName,\n      onChange: this.onChangeGigTourFestName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 25\n      }\n    }, \"Bands: \"), /*#__PURE__*/React.createElement(\"textarea\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.gig_bands,\n      onChange: this.onChangeGigBands,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"small\", {\n      id: \"bandHelp\",\n      className: \"form-text text-muted\",\n      style: {\n        marginTop: 2\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 25\n      }\n    }, \"Please place each band/artist on a new line.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 25\n      }\n    }, \"Venue: \"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"venueName\",\n      name: \"venueName\",\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.gig_venue,\n      onChange: this.onChangeGigVenue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-check-input\",\n      id: \"gigCancelledCheckbox\",\n      type: \"checkbox\",\n      name: \"gigCancelledCheckbox\",\n      onChange: this.onChangeGigCancelled,\n      checked: this.state.gig_cancelled,\n      value: this.state.gig_cancelled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-check-label\",\n      htmlFor: \"gigCancelledCheckbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 25\n      }\n    }, \"Cancelled\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Edit Gig\",\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Harrison/Documents/JavaScript Projects/Gig Tracker/src/components/edit-gig.component.js"],"names":["React","Component","axios","DatePicker","formatGigDate","EditGig","constructor","props","onSubmit","event","preventDefault","state","gig_bands","replace","updatedGig","gig_date","formatFinalDate","gig_or_fest","gig_tourFestName","gig_venue","gig_cancelled","console","log","post","match","params","id","then","res","data","history","push","onChangeGigDate","bind","onChangeFestivalEndDate","onChangeGigBands","onChangeGigOrFest","onChangeGigTourFestName","onChangeGigVenue","onChangeGigCancelled","Date","festival_end_date","setState","target","value","date","end_date","processReturnedDate","undefined","includes","splitDate","split","componentDidMount","get","response","dates","length","catch","error","render","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { formatGigDate } from \"../Utils.js\";\r\n\r\nexport default class EditGig extends Component {\r\n    constructor(props) {\r\n        // Super refers to the parent class' (Component) constructor.\r\n        // The \"this\" keyword cannot be used until after you have called the parent constructor.\r\n        super(props);\r\n\r\n        this.onChangeGigDate = this.onChangeGigDate.bind(this);\r\n        this.onChangeFestivalEndDate = this.onChangeFestivalEndDate.bind(this);\r\n        this.onChangeGigBands = this.onChangeGigBands.bind(this);\r\n        this.onChangeGigOrFest = this.onChangeGigOrFest.bind(this);\r\n        this.onChangeGigTourFestName = this.onChangeGigTourFestName.bind(this);\r\n        this.onChangeGigVenue = this.onChangeGigVenue.bind(this);\r\n        this.onChangeGigCancelled = this.onChangeGigCancelled.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n\r\n        this.state = {\r\n            gig_date: new Date(),\r\n            festival_end_date: '',\r\n            gig_or_fest: '',\r\n            gig_tourFestName: '',\r\n            gig_bands: '',\r\n            gig_venue: '',\r\n            gig_cancelled: false\r\n        }\r\n    }\r\n\r\n    onChangeGigDate(event) {\r\n        this.setState({\r\n            gig_date: event\r\n        }, () => {\r\n            if (this.state.festival_end_date < this.state.gig_date) {\r\n                this.setState({\r\n                    festival_end_date: this.state.gig_date\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    onChangeFestivalEndDate(event) {\r\n        if (event < this.state.gig_date) {\r\n            // TODO: Show some sort of error UI.\r\n            console.log('onChangeFestivalEndDate: End Date cannot be earlier than initial Date.');\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            festival_end_date: event\r\n        });\r\n    }\r\n\r\n    onChangeGigOrFest(event) {\r\n        this.setState({\r\n            gig_or_fest: event.target.value\r\n        });\r\n    }\r\n\r\n    onChangeGigTourFestName(event) {\r\n        this.setState({\r\n            gig_tourFestName: event.target.value\r\n        });\r\n    }\r\n\r\n    onChangeGigBands(event) {\r\n        this.setState({\r\n            gig_bands: event.target.value\r\n        });\r\n    }\r\n\r\n    onChangeGigVenue(event) {\r\n        this.setState({\r\n            gig_venue: event.target.value\r\n        });\r\n    }\r\n\r\n    onChangeGigCancelled(event) {\r\n        this.setState({\r\n            gig_cancelled: !this.state.gig_cancelled\r\n        });\r\n    }\r\n\r\n    formatFinalDate() {\r\n        let date = formatGigDate(this.state.gig_date);\r\n        console.log(this.state.gig_date + ' ' + this.state.festival_end_date);\r\n        console.log(this.state.gig_date === this.state.festival_end_date)\r\n        if (this.state.festival_end_date\r\n            && this.state.gig_date != this.state.festival_end_date) {\r\n            let end_date = formatGigDate(this.state.festival_end_date);\r\n            date += ' - ' + end_date;\r\n        }\r\n\r\n        return date;\r\n    }\r\n\r\n    onSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        // Change any line breaks into a singular string of comma-separated band/artist names.\r\n        this.state.gig_bands = this.state.gig_bands.replace(/[\\n\\r]/g, ', ');\r\n\r\n        // Create a new object containing our updated gig.\r\n        const updatedGig = {\r\n            gig_date: this.formatFinalDate(),\r\n            gig_or_fest: this.state.gig_or_fest,\r\n            gig_tourFestName: this.state.gig_tourFestName,\r\n            gig_bands: this.state.gig_bands,\r\n            gig_venue: this.state.gig_venue,\r\n            gig_cancelled: this.state.gig_cancelled\r\n        };\r\n        console.log(updatedGig);\r\n\r\n        // Overwrite the existing data using the given ID.\r\n        // We await here because we want the changes to complete before the user sees the main page again.\r\n        await axios.post('http://localhost:4000/gigs/update/' + this.props.match.params.id, updatedGig)\r\n            .then(res => console.log(res.data));\r\n\r\n        // Change the display back to the main page (Gig List).\r\n        this.props.history.push('/gig-tracker/');\r\n    }\r\n\r\n    processReturnedDate(date) {\r\n        if (date === undefined) {\r\n            return new Date();\r\n        }\r\n\r\n        if (date.includes(\" - \")) {\r\n            var splitDate = date.split(\" - \");\r\n            return [new Date(splitDate[0]), new Date(splitDate[1])];\r\n        } else {\r\n            return new Date(date);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Get the gig from the DB based on the given ID and set it to the current state of the page.\r\n        axios.get('http://localhost:4000/gigs/' + this.props.match.params.id)\r\n            .then(response => {\r\n                var dates = this.processReturnedDate(response.data.gig_date);\r\n\r\n                this.setState({\r\n                    gig_date: dates.length === undefined ? dates : dates[0],\r\n                    festival_end_date: dates.length === undefined ? '' : dates[1],\r\n                    gig_or_fest: response.data.gig_or_fest,\r\n                    gig_tourFestName: response.data.gig_tourFestName,\r\n\r\n                    // Put bands back on separate lines.\r\n                    gig_bands: response.data.gig_bands.replace(/, /g, '\\n'),\r\n                    gig_venue: response.data.gig_venue,\r\n                    gig_cancelled: response.data.gig_cancelled === undefined ? false : response.data.gig_cancelled\r\n                })\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"form\" id=\"gigFormDiv\">\r\n                <h3>Edit Gig</h3>\r\n                <h3 id=\"dateHeader\">Date</h3>\r\n                <DatePicker\r\n                    selected={this.state.gig_date}\r\n                    dateFormat={\"d MMMM yyyy\"}\r\n                    onChange={this.onChangeGigDate}\r\n                />\r\n                {this.state.gig_or_fest === 'Festival' ?\r\n                    <div style={{ marginTop: 30 }}>\r\n                        <h4 id=\"endDateHeader\">End Date</h4>\r\n                        <DatePicker\r\n                            selected={this.state.festival_end_date}\r\n                            dateFormat={\"d MMMM yyyy\"}\r\n                            onChange={this.onChangeFestivalEndDate}\r\n                        />\r\n                    </div>\r\n                    : null}\r\n                <form onSubmit={this.onSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\"\r\n                                type=\"radio\"\r\n                                name=\"gigOrFestivalRadios\"\r\n                                id=\"gigRadio\"\r\n                                value=\"Gig\"\r\n                                checked={this.state.gig_or_fest === 'Gig'}\r\n                                onChange={this.onChangeGigOrFest}\r\n                            />\r\n                            <label className=\"form-check-label\">Gig</label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                            <input className=\"form-check-input\"\r\n                                type=\"radio\"\r\n                                name=\"gigOrFestivalRadios\"\r\n                                id=\"festivalRadio\"\r\n                                value=\"Festival\"\r\n                                checked={this.state.gig_or_fest === 'Festival'}\r\n                                onChange={this.onChangeGigOrFest}\r\n                            />\r\n                            <label className=\"form-check-label\">Festival</label>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Tour Name: </label>\r\n                        <input type=\"text\"\r\n                            className=\"form-control\"\r\n                            value={this.state.gig_tourFestName}\r\n                            onChange={this.onChangeGigTourFestName}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Bands: </label>\r\n                        <textarea\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            value={this.state.gig_bands}\r\n                            onChange={this.onChangeGigBands}\r\n                        />\r\n                        <small id=\"bandHelp\"\r\n                            className=\"form-text text-muted\"\r\n                            style={{ marginTop: 2 }}>\r\n                            Please place each band/artist on a new line.\r\n                                    </small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Venue: </label>\r\n                        <input\r\n                            id=\"venueName\"\r\n                            name=\"venueName\"\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            value={this.state.gig_venue}\r\n                            onChange={this.onChangeGigVenue}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-check\">\r\n                        <input className=\"form-check-input\"\r\n                            id=\"gigCancelledCheckbox\"\r\n                            type=\"checkbox\"\r\n                            name=\"gigCancelledCheckbox\"\r\n                            onChange={this.onChangeGigCancelled}\r\n                            checked={this.state.gig_cancelled}\r\n                            value={this.state.gig_cancelled}\r\n                        />\r\n                        <label className=\"form-check-label\" htmlFor=\"gigCancelledCheckbox\">\r\n                            Cancelled\r\n                        </label>\r\n                    </div>\r\n                    <br />\r\n\r\n                    <div className=\"form-group\">\r\n                        <input type=\"submit\" value=\"Edit Gig\" className=\"btn btn-primary\" />\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}